<div class="mx-12 max-md:mx-3">


  <form class="grid grid-cols-1 lg:grid-cols-2 gap-3" [formGroup]="inputFormGroup">
    <!-- Value enter -->
    <p-input-group>
      <p-input-number formControlName="magicalPower" min="0"/>
      <p-inputgroup-addon>Magical Power</p-inputgroup-addon>
    </p-input-group>

    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
      <p-inputgroup>
        <!-- Sort by options -->
        <p-inputgroup-addon>
          Sort By
        </p-inputgroup-addon>
        <p-select formControlName="selectedSort" [options]="sorterOptions" optionValue="key">
          <ng-template #item let-_item #selectedItem>
            @let item = asSortOption(_item);
            <div class="flex items-center" [style]="{color: item.color}">
              @if (item.color) {
                <span [innerHTML]="toHex(item.icon) + '&nbsp;'"></span>
              }
              <span>{{ item.displayText }}</span>
            </div>
          </ng-template>
        </p-select>
      </p-inputgroup>

      <p-inputgroup>
        <!-- Sort order options -->
        <p-inputgroup-addon>
          Order By
        </p-inputgroup-addon>
        <p-select formControlName="selectedOrder" [options]="orderOptions" optionLabel="text"/>
      </p-inputgroup>
    </div>
  </form>

  <div class="hidden">
    {{ calculatedDataSignal() | json }}
  </div>

  <div>
    <p-table [value]="calculatedDataSignal()">
      <ng-template #header>
        <tr>
          @for (col of columnConfigs; track $index) {
            <th [ngStyle]="col.styles" class="text-center align-middle sticky-top">
              @if (col.unicode) {
                <span [innerHTML]="toHex(col.unicode)"></span>
              }
              <!-- Only shows for lg <= width <= 2xl -->
              @if (col.key === 'name') {
                <span>{{ col.headerText }}</span>
              } @else {
                <span class="lg-to-2xl">{{ col.shortText }}</span>
              }
              <!-- Only shows for 2xl <= width -->
              <span class="max-2xl:hidden">{{ col.headerText }}</span>
            </th>
          }
        </tr>
      </ng-template>
      <ng-template #body let-_row>
        @let row = asRowData(_row);
        <tr>
          @for (col of columnConfigs; track $index) {
            <td [ngStyle]="col.styles" class="text-center align-middle">
              {{ getBasePowerValue(row, col.key) }}
            </td>
          }
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
